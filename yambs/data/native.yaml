---
includes:
  - includes/common.yaml

cflag_groups:
  # Compile position-independent so we can build shared objects.
  common: [-fPIC]

  # Instrument builds for coverage and other analysis.
  debug: [-Og, -g, --coverage]
  opt: [-O2]
  asan: [-fsanitize=address]
  msan: [-fsanitize=memory]

variants:

  debug:
    cflag_groups: [common, asan]

  opt:
    cflag_groups: [common]

  clang:
    cflag_groups: [common, debug, msan]
    cc: clang
    cxx: clang++
    ld: clang++

  clang-opt:
    cflag_groups: [common, opt]
    cc: clang
    cxx: clang++
    ld: clang++
